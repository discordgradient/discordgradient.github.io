<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <meta name="description" content="The one Discord bot to do it all, with 12 categories and 450+ commands.">
    
        <title>Gradient Discord Bot | About</title>

        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZSMY4F19RP"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag() { dataLayer.push(arguments); }
            gtag('js', new Date());
            gtag('config', 'G-ZSMY4F19RP');
        </script>
    
        <link rel="icon" href="static/avatar.webp" type="image/x-icon">
        <link rel="stylesheet" href="style.css">
    </head>

    <body>
        <div id="nav-wrapper">
            <div id="nav-main-row">
                <a href="index.html">
                    <img src="static/avatar.webp" alt="Gradient Avatar" id="nav-avatar" draggable="false">
                </a>
        
                <nav id="top-nav">
                    <ul id="top-nav-list">
                        <li class="nav-active top-nav-item">About</li>
                        <li class="top-nav-item"><a href="https://discord.com/oauth2/authorize?client_id=683053587215024213&permissions=10432475036919&integration_type=0&scope=bot+applications.commands&redirect_uri=https://discordgradient.github.io/support.html?get-started=1&response_type=code">Invite</a></li>
                        <li class="top-nav-item"><a href="support.html">Support</a></li>
                        <li class="top-nav-item" id="top-nav-dropdown">
                            <button>More</button>
                            <img src="static/material-icons/dropdown.svg" alt="Dropdown" id="top-nav-dropdown-icon" draggable="false">
                        </li>
                        <li id="top-nav-mobile">
                            <img src="static/material-icons/menu.svg" alt="Menu" id="top-nav-mobile-icon" draggable="false">
                        </li>
                    </ul>
                </nav>
            </div>
        
            <div id="top-nav-dropdown-content">
                <a href="acknowledgements.html">Acknowledgements</a>
            </div>
        </div>

        <div id="onload-wrapper">
            <div id="switch-wrapper">
                <p>Feature Explorer</p>
                <label class="switch">
                    <input type="checkbox" id="about-switch-input">
                    <span class="slider"></span>
                </label>
                <p>Command Documentation</p>
            </div>



            <div id="about-wrapper">
                <div id="about-selection-container">
                    <div id="about-selection-title">
                        <h2 id="about-selection-title-header">Feature Explorer</h2>
                        <p id="about-selection-title-description">One bot, 12 different powerful categories to meet all of the needs of you
                            and your server.</p>
                        <p class="card-blue">üìñ See detailed command docs <a href="#" onclick="document.getElementById('about-switch-input').click();">here</a>.</p>
                    </div>
                    
                    <div id="about-selection-grid">
                        <div class="about-selection-button" id="about-selection-configuration">
                            <span class="about-selection-emoji">‚öôÔ∏è</span>
                            <span class="about-selection-text">Configuration</span>
                        </div>
                        <div class="about-selection-button" id="about-selection-economy">
                            <span class="about-selection-emoji">üí∞</span>
                            <span class="about-selection-text">Economy</span>
                        </div>
                        <div class="about-selection-button" id="about-selection-fun">
                            <span class="about-selection-emoji">üòÑ</span>
                            <span class="about-selection-text">Fun</span>
                        </div>
                        <div class="about-selection-button" id="about-selection-games">
                            <span class="about-selection-emoji">üéÆ</span>
                            <span class="about-selection-text">Games</span>
                        </div>
                        <div class="about-selection-button" id="about-selection-images">
                            <span class="about-selection-emoji">üì∑</span>
                            <span class="about-selection-text">Images</span>
                        </div>
                        <div class="about-selection-button" id="about-selection-moderation">
                            <span class="about-selection-emoji">üõ°Ô∏è</span>
                            <span class="about-selection-text">Moderation</span>
                        </div>
                        <div class="about-selection-button" id="about-selection-music">
                            <span class="about-selection-emoji">üéµ</span>
                            <span class="about-selection-text">Music</span>
                        </div>
                        <div class="about-selection-button" id="about-selection-sciences">
                            <span class="about-selection-emoji">üß™</span>
                            <span class="about-selection-text">Sciences</span>
                        </div>
                        <div class="about-selection-button" id="about-selection-statistics">
                            <span class="about-selection-emoji">üìä</span>
                            <span class="about-selection-text">Statistics</span>
                        </div>
                        <div class="about-selection-button" id="about-selection-text">
                            <span class="about-selection-emoji">üÜó</span>
                            <span class="about-selection-text">Text</span>
                        </div>
                        <div class="about-selection-button" id="about-selection-utility">
                            <span class="about-selection-emoji">üõ†Ô∏è</span>
                            <span class="about-selection-text">Utility</span>
                        </div>
                        <div class="about-selection-button" id="about-selection-premium">
                            <span class="about-selection-emoji">‚≠ê</span>
                            <span class="about-selection-text">Premium</span>
                        </div>
                    </div>
                </div>

                <div id="about-category-view"></div>
            </div>



            <div id="commands-wrapper">
                <div class="centered-div">
                    <h1 id="commands-title">Command Documentation</h1>
                </div>
                
                <div class="centered-div">
                    <p id="commands-subtitle">Browse the entire list of Gradient's commands by category, or simply by searching.</p>
                </div>
                
                <div id="commands-search-bar" class="centered-div">
                    <input type="text" placeholder="Find a command by name, category, or description..." autocomplete="off"
                        id="commands-search-input" list="commands-search-suggestions">
                
                    <datalist id="commands-search-suggestions">
                        <option value="Configuration"></option>
                        <option value="Economy"></option>
                        <option value="Fun"></option>
                        <option value="Games"></option>
                        <option value="Images"></option>
                        <option value="Moderation"></option>
                        <option value="Music"></option>
                        <option value="Sciences"></option>
                        <option value="Statistics"></option>
                        <option value="Text"></option>
                        <option value="Utility"></option>
                        <option value="Premium"></option>
                    </datalist>
                
                    <button id="commands-search-button">
                        <img src="static/material-icons/search.svg" alt="Search" draggable="false">
                    </button>
                </div>
                
                <div id="commands-search-results" class="centered-div"></div>
            </div>
        </div>

        <footer>
            <div class="footer-content onload-fade-in-delayed">
                <p>Made with ‚ù§Ô∏è by Jeremy L. <span class="dark-separator">|</span> &copy; 2025</p>
                <p><a href="terms.html">Terms</a> <span class="dark-separator">&</span> <a href="privacy.html">Privacy</a></p>
            </div>
        </footer>



        <script src="static/scripts/categoryConstants.js"></script>
        <script src="static/scripts/allCommands.js"></script>
        <script src="static/scripts/helpers.js"></script>

        <script>
            window.onload = () => {
                const urlParams = new URLSearchParams(window.location.search);
                const fill = urlParams.get("fill");


                setNavDropdown();
                handleAnchors();
                setSwitch("about-switch-input", ["about-wrapper", "commands-wrapper"], [["flex", "none"], ["block", "none"]]);


                // ABOUT SELECTION BUTTONS
                const configurationButton = document.getElementById("about-selection-configuration");
                const economyButton = document.getElementById("about-selection-economy");
                const funButton = document.getElementById("about-selection-fun");
                const gamesButton = document.getElementById("about-selection-games");
                const imagesButton = document.getElementById("about-selection-images");
                const moderationButton = document.getElementById("about-selection-moderation");
                const musicButton = document.getElementById("about-selection-music");
                const sciencesButton = document.getElementById("about-selection-sciences");
                const statisticsButton = document.getElementById("about-selection-statistics");
                const textButton = document.getElementById("about-selection-text");
                const utilityButton = document.getElementById("about-selection-utility");
                const premiumButton = document.getElementById("about-selection-premium");


                // ABOUT CATEGORY VIEWS
                const views = [
                    {
                        name: "Configuration",
                        button: configurationButton,
                        description: "A customizable bot is a good bot. Gradient is equipped with a suite of user settings for you to tune to your liking, and server settings that enable advanced functionality for all members.",
                        images: [{ src: "static/about-images/configuration-settings.webp", alt: "Configuration (settings)" }, { src: "static/about-images/configuration-youtube.webp", alt: "Configuration (youtube)" }],
                    },
                    {
                        name: "Economy",
                        button: economyButton,
                        description: "Ever wanted to get free money every day, rob your friends, or reach the apex of wealth? With Gradient's robust fictitional currency system, coins, you can achieve all of this and much more.",
                        images: [{ src: "static/about-images/economy-balance.webp", alt: "Economy (balance)" }, { src: "static/about-images/economy-leaderboard.webp", alt: "Economy (leaderboard)" }],
                    },
                    {
                        name: "Fun",
                        button: funButton,
                        description: "These random fun and memey commands are guranteed to put a smile on your face and add some spice to conversations in your server.",
                        images: [{ src: "static/about-images/fun-beemovie.webp", alt: "Fun (beemovie)" }, { src: "static/about-images/fun-history.webp", alt: "Fun (history)" }],
                    },
                    {
                        name: "Games",
                        button: gamesButton,
                        description: "Pass some time or take a little break with Gradient's wide selection of minigames that you can play directly within your server! Test your sports skills, revisit classics such as Battleship and Yahtzee, challenge a friend to Tic Tac Toe or Uno, and more!",
                        images: [{ src: "static/about-images/games-tictactoe.webp", alt: "Games (tictactoe)" }, { src: "static/about-images/games-uno.webp", alt: "Games (uno)" }],
                    },
                    {
                        name: "Images",
                        button: imagesButton,
                        description: "Add hilarious effects to a member's profile picture, create your own memes from templates, and unleash creativity with AI-powered image generation with Gradient's collection of image manipulation commands.",
                        images: [{ src: "static/about-images/images-deepfry.webp", alt: "Images (deepfry)" }, { src: "static/about-images/images-gru.webp", alt: "Images (gru)" }],
                    },
                    {
                        name: "Moderation",
                        button: moderationButton,
                        description: "Ever wanted to be able to modify server components and moderate members with just a quick command? Gradient has you covered, and you can even enable Two-Factor Authentication (2FA) to add an extra layer of security.",
                        images: [{ src: "static/about-images/moderation-ban.webp", alt: "Moderation (ban)" }, { src: "static/about-images/moderation-purge.webp", alt: "Moderation (purge)" }],
                    },
                    {
                        name: "Music",
                        button: musicButton,
                        description: "Start a listening party directly within a voice channel in your server, and control what's playing with an advanced queue system.",
                        images: [{ src: "static/about-images/music-nowplaying.webp", alt: "Music (nowplaying)" }, { src: "static/about-images/music-queue.webp", alt: "Music (queue)" }],
                    },
                    {
                        name: "Sciences", 
                        button: sciencesButton,
                        description: "Satisfy your inner nerd, or get homework help instantly with Gradient's advanced scientific lookup and mathematical computation commands, including step-by-step solutions from WolframAlpha.",
                        images: [{ src: "static/about-images/sciences-wolfram.webp", alt: "Sciences (wolfram)" }, { src: "static/about-images/sciences-chemequation.webp", alt: "Sciences (chemequation)" }],
                    },
                    {
                        name: "Statistics",
                        button: statisticsButton,
                        description: "Gradient easily and aesthetically displays detailed stats for your server, fetches up-to-date data for games such as League of Legends and Supercell games, and looks up real-world information such as Google Maps and public transit.",
                        images: [{ src: "static/about-images/statistics-serverinfo.webp", alt: "Statistics (serverinfo)" }, { src: "static/about-images/statistics-lolitem.webp", alt: "Statistics (lolitem)" }],
                    },
                    {
                        name: "Text", 
                        button: textButton, 
                        description: "Tired of having to open a separate website to copy some special characters, convert some text into binary, or look up the definition of a word? With Gradient, you can now work with text directly within Discord like never before.",
                        images: [{ src: "static/about-images/text-dictionary.webp", alt: "Text (dictionary)" }, { src: "static/about-images/text-specialcharacter.webp", alt: "Text (specialcharacter)" }],
                    },
                    {
                        name: "Utility",
                        button: utilityButton,
                        description: "Gradient's utility commands provide general helpful functions such as checking the bot's status, analyzing color information, and even searching Google!",
                        images: [{ src: "static/about-images/utility-google.webp", alt: "Utility (google)" }, { src: "static/about-images/utility-color.webp", alt: "Utility (color)" }],
                    },
                    {
                        name: "Premium",
                        button: premiumButton,
                        description: "Gradient is completely free to use and always will be. Users who meet the Premium requirements are eligible to receive Gradient Premium at no cost and take the Gradient experience to the next level.",
                        card: "‚ÑπÔ∏è   Learn more about Gradient Premium <a href='premium.html'>here</a>.",
                        images: [],
                    },
                ];


                var i, selectedView, timeout, currentView, foundView;
                var viewWrapper, categoryWrapper, categoryText, categoryTitle, categoryDescription, categoryCard, discordButton, imageContainer, image;

                for (let viewIdx = 0; viewIdx < views.length; viewIdx++) {
                    views[viewIdx].button.addEventListener("click", () => {
                        changeViews(views[viewIdx].name.toLowerCase());
                    });

                    views[viewIdx].button.addEventListener("mouseover", () => {
                        views[viewIdx].button.style.backgroundColor = hexToRgb(categoryConstants.find(x => x.category == views[viewIdx].name.toLowerCase()).color, 0.5);
                    });

                    views[viewIdx].button.addEventListener("mouseout", () => {
                        if (currentView != views[viewIdx].name.toLowerCase()) {
                            views[viewIdx].button.style.backgroundColor = "#4e4e4e";
                        } else {
                            views[viewIdx].button.style.backgroundColor = categoryConstants.find(x => x.category == views[viewIdx].name.toLowerCase()).color;
                        }
                    });
                }

                function changeViews(viewName) {
                    if (timeout) clearTimeout(timeout);

                    categoryWrapper = document.getElementById("about-category-wrapper");
                    if (categoryWrapper) categoryWrapper.remove();

                    if (currentView != viewName) {
                        currentView = viewName;

                        foundView = views.find(x => x.name.toLowerCase() == viewName);

                        categoryWrapper = document.createElement("div");
                        categoryWrapper.setAttribute("id", "about-category-wrapper");

                        categoryText = document.createElement("div");
                        categoryText.classList.add("about-category-text");
                        categoryTitle = document.createElement("h2");
                        categoryTitle.classList.add("about-category-title");
                        categoryTitle.textContent = foundView.name;
                        categoryDescription = document.createElement("p");
                        categoryDescription.classList.add("about-category-description");
                        categoryDescription.textContent = foundView.description;
                        if (foundView.card) {
                            categoryCard = document.createElement("p");
                            categoryCard.classList.add("card-orange");
                            categoryCard.innerHTML = foundView.card;
                        }
                        discordButton = document.createElement("button");
                        discordButton.classList.add("discord-button");
                        discordButton.textContent = "View " + foundView.name + " commands";
                        discordButton.onclick = () => window.location.href = "about.html?fill=" + foundView.name;

                        imageContainer = document.createElement("div");
                        imageContainer.classList.add("about-category-image-container");
                        imageContainer.id = viewName + "-image-container";
                        for (i = 0; i < foundView.images.length; i++) {
                            image = document.createElement("img");
                            image.src = foundView.images[i].src;
                            image.alt = foundView.images[i].alt;
                            image.classList.add("about-category-image");
                            image.draggable = false;
                            imageContainer.appendChild(image);
                        }

                        categoryText.appendChild(categoryTitle);
                        categoryText.appendChild(categoryDescription);
                        if (foundView.card) categoryText.appendChild(categoryCard);
                        categoryText.appendChild(discordButton);

                        categoryWrapper.appendChild(categoryText);
                        categoryWrapper.appendChild(imageContainer);

                        viewWrapper = document.getElementById("about-category-view");
                        viewWrapper.appendChild(categoryWrapper);
                        
                        setTimeout(() => {
                            categoryWrapper.classList.add("visible");

                            if (window.innerWidth <= 650) {
                                categoryWrapper.scrollIntoView({ behavior: "smooth" });
                            }
                        }, 100);

                        for (i = 0; i < views.length; i++) {
                            if (currentView != views[i].name.toLowerCase()) {
                                views[i].button.style.backgroundColor = "#4e4e4e";
                            }
                        }
                    } else {
                        currentView = undefined;

                        for (i = 0; i < views.length; i++) {
                            views[i].button.style.backgroundColor = "#4e4e4e";
                        }
                    }
                }



                function searchCommands(input, searchButton) {
                    var idx, jdx, kdx, outputValue;
                    var exact, starts, contains, category, description, letters;
                    var exactAlias, startsAlias, containsAlias, lettersAlias;
                    var resultsContainer = document.getElementById("commands-search-results");
                    var dropdown = document.createElement("div");
                    dropdown.setAttribute("id", "commands-search-results-dropdown");
                    var header, cardsContainer, showHideContainer, sortContainer;
                    var currentSort = "A - Z", currentGroup = "None";


                    function generateCards(cardsContainer, filtered, hasDescription = false) {
                        filtered.forEach(x => {
                            var resultCard = document.createElement("div");
                            resultCard.innerHTML = x.formatted || x.name;
                            resultCard.classList.add("commands-search-results-card");
                            resultCard.setAttribute("title", `category: ${x.category}`);
                            if (x.nsfw) {
                                resultCard.classList.add("blurred");
                                resultCard.classList.add("commands-search-results-card-nsfw");
                            } else {
                                resultCard.addEventListener("click", () => {
                                    openCard(allCommands.find(y => y.name == x.name));
                                });
                            }
                            if (x.premium) resultCard.classList.add("commands-search-results-card-premium");

                            resultCard.style.backgroundColor = categoryConstants.find(y => y.category == x.category).color;

                            if (!hasDescription) {
                                cardsContainer.appendChild(resultCard);
                            } else {
                                var descriptionContainer = document.createElement("div");
                                var resultCardDescription = document.createElement("div");

                                descriptionContainer.classList.add("commands-search-results-description-container");

                                resultCardDescription.innerHTML = x.description;
                                resultCardDescription.classList.add("commands-search-results-card-description");

                                if (x.nsfw) {
                                    resultCard.classList.add("blurred");
                                    resultCardDescription.classList.add("blurred");
                                }

                                descriptionContainer.appendChild(resultCard);
                                descriptionContainer.appendChild(resultCardDescription);
                                cardsContainer.appendChild(descriptionContainer);
                            }
                        });
                    }


                    function sortGroupCards() {
                        var cardContainers = document.getElementsByClassName("commands-search-results-cards-container");
                        var cards, categories;

                        for (idx = 0; idx < cardContainers.length; idx++) {
                            cards = [...cardContainers[idx].getElementsByClassName("commands-search-results-card")];
                            categories = {};

                            switch (currentSort) {
                                case "A - Z":
                                    cards.sort((a, b) => a.textContent.toLowerCase().localeCompare(b.textContent.toLowerCase()));
                                    break;

                                case "Z - A":
                                    cards.sort((a, b) => b.textContent.toLowerCase().localeCompare(a.textContent.toLowerCase()));
                                    break;

                                case "Length":
                                    cards.sort((a, b) => a.textContent.length == b.textContent.length ? a.textContent.toLowerCase().localeCompare(b.textContent.toLowerCase()) : a.textContent.length - b.textContent.length);
                                    break;
                            }

                            switch (currentGroup) {
                                case "None":
                                    categories["0"] = cards;
                                    break;

                                case "Category":
                                    cards.forEach(x => {
                                        var category = x.getAttribute("title");
                                        if (!categories[category]) categories[category] = [];
                                        categories[category].push(x);
                                    });
                                    break;
                            }

                            cardContainers[idx].innerHTML = "";
                            Object.values(categories).forEach(group => {
                                group.forEach(x => cardContainers[idx].appendChild(x));
                            });
                        }
                    }


                    // TODO: select multiple options
                    function generateSortButton(buttonName, buttonIcon, dropdownContent, selectMultiple) {
                        var dropdown = document.createElement("div");
                        dropdown.classList.add("commands-search-results-sort-button");
                        var img = document.createElement("img");
                        img.src = buttonIcon;
                        img.alt = buttonName;
                        img.draggable = false;
                        var text = document.createElement("p");
                        text.textContent = buttonName;
                        dropdown.appendChild(img);
                        dropdown.appendChild(text);

                        var content = document.createElement("div");
                        content.classList.add("commands-search-results-sort-content");
                        dropdownContent.forEach((x, i) => {
                            var option = document.createElement("div");
                            option.textContent = x;
                            option.classList.add("commands-search-results-sort-content-text");
                            if (i == 0) option.classList.add("commands-search-results-sort-content-active");

                            option.addEventListener("click", () => {
                                var active = content.querySelector(".commands-search-results-sort-content-active");
                                if (active.textContent != option.textContent) {
                                    active.classList.remove("commands-search-results-sort-content-active");
                                    option.classList.add("commands-search-results-sort-content-active");

                                    switch (buttonName) {
                                        case "Sort":
                                            currentSort = option.textContent;
                                            break;

                                        case "Group":
                                            currentGroup = option.textContent;
                                            break;
                                    }

                                    sortGroupCards();
                                }
                            });

                            content.appendChild(option);
                        });

                        return [dropdown, content];
                    }


                    function broadRecursion(inputText, givenText, offset, minimumMatches, mode) {
                        var i, j = 0, matches = [];

                        for (i = 0; i < givenText.length && j < inputText.length; i++) {
                            switch (mode) {
                                case "letters":
                                    if (givenText[i] == inputText[j]) {
                                        j++;
                                        if (offset > 0) {
                                            matches.push(i + offset - 1);
                                        } else {
                                            matches.push(i);
                                        }
                                    }

                                    break;

                                case "words":
                                    if (givenText[i] == inputText[j] || givenText[i] == inputText[j] + "s" || givenText[i] + "s" == inputText[j]) {
                                        j++;
                                        if (offset > 0) {
                                            matches.push(i + offset - 1);
                                        } else {
                                            matches.push(i);
                                        }
                                    }

                                    break;
                            }
                        }

                        if (j < minimumMatches && inputText.length > minimumMatches) {
                            return broadRecursion(inputText.slice(1), offset + 1, minimumMatches, mode);
                        } else {
                            return matches;
                        }
                    }


                    function stripBold(input) {
                        return input.replace(/<b>|<\/b>/g, "");
                    }


                    if (input.length == 1) {
                        starts = allCommands.filter(x => x.category != "creator" && x.name.toLowerCase().startsWith(input.toLowerCase())).map(x => ({ name: x.name, formatted: "", category: x.category, nsfw: x.nsfw, premium: x.premium }));
                        starts.forEach(x => x.formatted = "<b>" + x.name[0] + "</b>" + x.name.slice(1));

                        for (idx = 0; idx < allCommands.length; idx++) {
                            if (allCommands[idx].category == "creator" || allCommands[idx].aliases.length == 0 || starts.find(x => x.name == allCommands[idx].name)) continue;

                            for (jdx = 0; jdx < allCommands[idx].aliases.length; jdx++) {
                                if (allCommands[idx].aliases[jdx].toLowerCase().startsWith(input.toLowerCase())) {
                                    starts.push({ name: allCommands[idx].name, formatted: "<b>" + allCommands[idx].aliases[jdx][0] + "</b>" + allCommands[idx].aliases[jdx].slice(1), category: allCommands[idx].category, nsfw: allCommands[idx].nsfw, premium: allCommands[idx].premium });
                                    break;
                                }
                            }
                        }

                        starts.sort((a, b) => stripBold(a.formatted).localeCompare(stripBold(b.formatted)));

                        header = document.createElement("p");
                        header.classList.add("commands-search-results-header");

                        if (starts.length > 0) {
                            header.textContent = `${starts.length} ${pluralize("command", starts.length)} starting with "${input}" found:`;

                            cardsContainer = document.createElement("div");
                            cardsContainer.classList.add("commands-search-results-cards-container");

                            generateCards(cardsContainer, starts);

                            dropdown.appendChild(header);
                            dropdown.appendChild(cardsContainer);
                        } else {
                            header.textContent = `We searched far and wide for ${input}, but no matching commands were found. Try searching for something else.`;

                            dropdown.appendChild(header);
                        }

                        resultsContainer.appendChild(dropdown);

                        outputValue = (starts.length > 0) ? "starts" : "none";
                    } else {
                        exact = allCommands.filter(x => x.category != "creator" && x.name.toLowerCase() == input.toLowerCase()).map(x => ({ name: x.name, formatted: "<b>" + x.name + "</b>", category: x.category, nsfw: x.nsfw, premium: x.premium }));

                        for (idx = 0; idx < allCommands.length; idx++) {
                            if (allCommands[idx].category == "creator" || allCommands[idx].aliases.length == 0 || exact.find(x => x.name == allCommands[idx].name)) continue;

                            for (jdx = 0; jdx < allCommands[idx].aliases.length; jdx++) {
                                if (allCommands[idx].aliases[jdx].toLowerCase() == input.toLowerCase()) {
                                    exact.push({ name: allCommands[idx].name, formatted: "<b>" + allCommands[idx].aliases[jdx] + "</b>", category: allCommands[idx].category, nsfw: allCommands[idx].nsfw, premium: allCommands[idx].premium });
                                    break;
                                }
                            }
                        }

                        exact.sort((a, b) => stripBold(a.formatted).localeCompare(stripBold(b.formatted)));

                        if (exact.length > 0) {
                            header = document.createElement("p");
                            header.classList.add("commands-search-results-header");

                            header.textContent = `Exact match:`;

                            cardsContainer = document.createElement("div");
                            cardsContainer.classList.add("commands-search-results-cards-container");

                            generateCards(cardsContainer, exact);

                            dropdown.appendChild(header);
                            dropdown.appendChild(cardsContainer);
                        }

                        exact = new Set(exact.map(x => x.name));

                        starts = allCommands.filter(x => !exact.has(x.name) && x.category != "creator" && x.name.toLowerCase().startsWith(input.toLowerCase())).map(x => ({ name: x.name, formatted: "", category: x.category, nsfw: x.nsfw, premium: x.premium }));
                        starts.forEach(x => x.formatted = "<b>" + x.name.slice(0, input.length) + "</b>" + x.name.slice(input.length));

                        for (idx = 0; idx < allCommands.length; idx++) {
                            if (allCommands[idx].category == "creator" || allCommands[idx].aliases.length == 0 || exact.has(allCommands[idx].name) || starts.find(x => x.name == allCommands[idx].name)) continue;

                            for (jdx = 0; jdx < allCommands[idx].aliases.length; jdx++) {
                                if (allCommands[idx].aliases[jdx].toLowerCase().startsWith(input.toLowerCase())) {
                                    starts.push({ name: allCommands[idx].name, formatted: "<b>" + allCommands[idx].aliases[jdx].slice(0, input.length) + "</b>" + allCommands[idx].aliases[jdx].slice(input.length), category: allCommands[idx].category, nsfw: allCommands[idx].nsfw, premium: allCommands[idx].premium });
                                    break;
                                }
                            }
                        }

                        starts.sort((a, b) => stripBold(a.formatted).localeCompare(stripBold(b.formatted)));

                        if (starts.length > 0) {
                            header = document.createElement("p");
                            header.classList.add("commands-search-results-header");

                            header.textContent = `${starts.length} ${pluralize("command", starts.length)} starting with "${input}" found:`;

                            cardsContainer = document.createElement("div");
                            cardsContainer.classList.add("commands-search-results-cards-container");

                            generateCards(cardsContainer, starts);

                            dropdown.appendChild(header);
                            dropdown.appendChild(cardsContainer);
                        }

                        starts = new Set(starts.map(x => x.name));

                        contains = allCommands.filter(x => !exact.has(x.name) && !starts.has(x.name) && x.category != "creator" && (x.name.includes(input.toLowerCase()) || input.toLowerCase().includes(x.name))).map(x => ({ name: x.name, formatted: "", category: x.category, nsfw: x.nsfw, premium: x.premium }));
                        contains.forEach(x => {
                            if (input.toLowerCase().includes(x.name)) {
                                x.formatted = `<b>${x.name}</b>`;
                            } else {
                                var inputLower = input.toLowerCase();
                                x.formatted = x.name.replaceAll(inputLower, `<b>${inputLower}</b>`);
                            }
                        });

                        for (idx = 0; idx < allCommands.length; idx++) {
                            if (allCommands[idx].category == "creator" || allCommands[idx].aliases.length == 0 || exact.has(allCommands[idx].name) || starts.has(allCommands[idx].name) || contains.find(x => x.name == allCommands[idx].name)) continue;

                            for (jdx = 0; jdx < allCommands[idx].aliases.length; jdx++) {
                                if (allCommands[idx].aliases[jdx].toLowerCase().includes(input.toLowerCase())) {
                                    var inputLower = input.toLowerCase();
                                    var formatted = allCommands[idx].aliases[jdx].replaceAll(inputLower, `<b>${inputLower}</b>`);
                                    contains.push({ name: allCommands[idx].name, formatted: formatted, category: allCommands[idx].category, nsfw: allCommands[idx].nsfw, premium: allCommands[idx].premium });
                                    break;
                                } else if (input.toLowerCase().includes(allCommands[idx].aliases[jdx])) {
                                    contains.push({ name: allCommands[idx].name, formatted: `<b>${allCommands[idx].aliases[jdx]}</b>`, category: allCommands[idx].category, nsfw: allCommands[idx].nsfw, premium: allCommands[idx].premium });
                                    break;
                                }
                            }
                        }

                        contains.sort((a, b) => stripBold(a.formatted).localeCompare(stripBold(b.formatted)));
                        
                        if (contains.length > 0) {
                            header = document.createElement("p");
                            header.classList.add("commands-search-results-header");

                            header.textContent = `${contains.length} command ${pluralize("name", contains.length)} containing "${input}" found:`;

                            cardsContainer = document.createElement("div");
                            cardsContainer.classList.add("commands-search-results-cards-container");

                            generateCards(cardsContainer, contains);

                            dropdown.appendChild(header);
                            dropdown.appendChild(cardsContainer);
                        }

                        contains = new Set(contains.map(x => x.name));

                        description = [];
                        for (idx = 0; idx < allCommands.length; idx++) {
                            if (exact.has(allCommands[idx].name) || starts.has(allCommands[idx].name) || contains.has(allCommands[idx].name) || allCommands[idx].category == "creator") continue;

                            var descriptionOriginal = allCommands[idx].description.replace(/[\n\\/]+/g, " ").replace(/[^a-zA-Z0-9 ]/g, "").split(" ");
                            var descriptionWords = allCommands[idx].description.toLowerCase().replace(/[\n\\/]+/g, " ").replace(/[^a-zA-Z0-9 ]/g, "").split(" ");
                            var inputWords = input.toLowerCase().replace(/[^a-zA-Z0-9 ]/g, "").split(" ");
                            var matches = broadRecursion(inputWords, descriptionWords, 0, 2, "words");
                            var formatted = [];

                            if (matches.length >= 2) {
                                for (jdx = 0; jdx < descriptionOriginal.length; jdx++) {
                                    if (matches.includes(jdx)) {
                                        formatted.push(`<b>${descriptionOriginal[jdx]}</b>`);
                                    } else {
                                        formatted.push(descriptionOriginal[jdx]);
                                    }
                                }

                                description.push({ name: allCommands[idx].name, description: formatted.join(" "), category: allCommands[idx].category, nsfw: allCommands[idx].nsfw, premium: allCommands[idx].premium, matchCount: matches.length });
                            }
                        }
                        description.sort((a, b) => {
                            if (a.matchCount > b.matchCount) {
                                return -1;
                            } else if (a.matchCount < b.matchCount) {
                                return 1;
                            } else {
                                return a.name.localeCompare(b.name);
                            }
                        });

                        if (description.length > 0) {
                            header = document.createElement("p");
                            header.classList.add("commands-search-results-header");

                            header.textContent = `${description.length} ${pluralize("command", description.length)} with containing the words "${input}" in their description found:`;

                            cardsContainer = document.createElement("div");
                            cardsContainer.classList.add("commands-search-results-cards-container-left");

                            generateCards(cardsContainer, description, true);

                            dropdown.appendChild(header);
                            dropdown.appendChild(cardsContainer);
                        }

                        description = new Set(description.map(x => x.name));

                        category = allCommands.filter(x => {
                            if (x.category == "creator") return false;
                            if (input.toLowerCase() == "premium" && x.premium) return true;

                            var categoryLetters = x.category.split("");
                            var inputLetters = input.toLowerCase().split("");
                            var i;

                            if (inputLetters.length > categoryLetters.length) return false;

                            for (i = 0; i < categoryLetters.length / 2; i++) {
                                if (inputLetters[i] != categoryLetters[i]) return false;
                            }

                            return true;
                        }).map(x => ({ name: x.name, category: x.category, nsfw: x.nsfw, premium: x.premium })).sort((a, b) => a.name.localeCompare(b.name));

                        if (category.length > 0) {
                            header = document.createElement("p");
                            header.classList.add("commands-search-results-header");

                            if (input.toLowerCase() != "premium") {
                                header.textContent = `Looking for the ${category.length} ${pluralize("command", category.length)} in the ${titleCase(category[0].category)} category?`;
                            } else {
                                header.textContent = `Looking for the ${category.length} Premium ${pluralize("command", category.length)}?`;
                            }

                            cardsContainer = document.createElement("div");
                            cardsContainer.classList.add("commands-search-results-cards-container");

                            generateCards(cardsContainer, category);

                            dropdown.appendChild(header);
                            dropdown.appendChild(cardsContainer);
                        }

                        category = new Set(category.map(x => x.name));

                        letters = [];
                        for (idx = 0; idx < allCommands.length; idx++) {
                            if (exact.has(allCommands[idx].name) || starts.has(allCommands[idx].name) || contains.has(allCommands[idx].name) || category.has(allCommands[idx].name) || description.has(allCommands[idx].name) || allCommands[idx].category == "creator") continue;

                            var nameLetters = allCommands[idx].name.split("");
                            var inputLetters = input.toLowerCase().split("");
                            var matches = broadRecursion(inputLetters, nameLetters, 0, 3, "letters");
                            var formatted = "";

                            if (matches.length >= 3) {
                                for (jdx = 0; jdx < nameLetters.length; jdx++) {
                                    if (matches.includes(jdx)) {
                                        formatted += `<b>${nameLetters[jdx]}</b>`;
                                    } else {
                                        formatted += nameLetters[jdx];
                                    }
                                }

                                letters.push({ name: allCommands[idx].name, formatted: formatted, category: allCommands[idx].category, nsfw: allCommands[idx].nsfw, premium: allCommands[idx].premium });
                            }
                        }
                        for (idx = 0; idx < allCommands.length; idx++) {
                            if (allCommands[idx].category == "creator" || allCommands[idx].aliases.length == 0 || exact.has(allCommands[idx].name) || starts.has(allCommands[idx].name) || contains.has(allCommands[idx].name) || category.has(allCommands[idx].name) || description.has(allCommands[idx].name) || letters.find(x => x.name == allCommands[idx].name)) continue;

                            for (jdx = 0; jdx < allCommands[idx].aliases.length; jdx++) {
                                var nameLetters = allCommands[idx].aliases[jdx].split("");
                                var inputLetters = input.toLowerCase().split("");
                                var matches = broadRecursion(inputLetters, nameLetters, 0, 3, "letters");
                                var formatted = "";

                                if (matches.length >= 3) {
                                    for (kdx = 0; kdx < nameLetters.length; kdx++) {
                                        if (matches.includes(kdx)) {
                                            formatted += `<b>${nameLetters[kdx]}</b>`;
                                        } else {
                                            formatted += nameLetters[kdx];
                                        }
                                    }

                                    letters.push({ name: allCommands[idx].name, formatted: formatted, category: allCommands[idx].category, nsfw: allCommands[idx].nsfw, premium: allCommands[idx].premium });
                                    break;
                                }
                            }
                        }
                        letters.sort((a, b) => stripBold(a.formatted).localeCompare(stripBold(b.formatted)));

                        if (letters.length > 0) {
                            header = document.createElement("p");
                            header.classList.add("commands-search-results-header");

                            header.textContent = `${letters.length} ${pluralize("command", letters.length)} containing 3 or more letters from "${input}" found:`;

                            cardsContainer = document.createElement("div");
                            cardsContainer.classList.add("commands-search-results-cards-container");
                            cardsContainer.style.display = "none";

                            generateCards(cardsContainer, letters);

                            showHideContainer = document.createElement("div");
                            showHideContainer.classList.add("commands-search-results-show-hide-container");
                            showHideContainer.textContent = "Show";
                            showHideContainer.addEventListener("click", () => {
                                switch (showHideContainer.textContent) {
                                    case "Show":
                                        showHideContainer.textContent = "Hide";
                                        cardsContainer.style.display = "flex";
                                        break;

                                    case "Hide":
                                        showHideContainer.textContent = "Show";
                                        cardsContainer.style.display = "none";
                                        break;
                                }
                            });

                            dropdown.appendChild(header);
                            dropdown.appendChild(showHideContainer);
                            dropdown.appendChild(cardsContainer);
                        }

                        letters = new Set(letters.map(x => x.name));

                        if (exact.size == 0 && starts.size == 0 && contains.size == 0 && description.size == 0 && category.size == 0 && letters.size == 0) {
                            header = document.createElement("p");
                            header.classList.add("commands-search-results-header");

                            header.textContent = `We searched far and wide for "${input}", but no matching commands were found. Try searching for something else.`;

                            dropdown.appendChild(header);
                        }

                        resultsContainer.appendChild(dropdown);

                        outputValue = (exact.size > 0) ? "exact" : (starts.size > 0) ? "starts" : (contains.size > 0) ? "contains" : (description.size > 0) ? "description" : (category.size > 0) ? "category" : (letters.size > 0) ? "letters" : "none";
                    }

                    if (outputValue != "none") {
                        sortContainer = document.createElement("div");
                        sortContainer.setAttribute("id", "commands-search-results-sort-container");

                        var [sortDropdown, sortContent] = generateSortButton("Sort", "static/material-icons/alpha_sort.svg", ["A - Z", "Z - A", "Length"]);
                        var [filterDropdown, filterContent] = generateSortButton("Filter", "static/material-icons/filter.svg", ["Premium", "NSFW"]);
                        var [groupDropdown, groupContent] = generateSortButton("Group", "static/material-icons/group.svg", ["None", "Category"]);

                        document.addEventListener("click", event => {
                            var toggleVisibility = (element, isTarget) => isTarget ? element.style.visibility == "visible" ? element.style.visibility = "hidden" : element.style.visibility = "visible" : element.style.visibility = "hidden";
                            var toggleActive = (element, toggle) => element.classList[toggle ? "toggle" : "remove"]("commands-search-results-sort-button-active");

                            var isSort = sortDropdown.contains(event.target);
                            var isFilter = filterDropdown.contains(event.target);
                            var isGroup = groupDropdown.contains(event.target);

                            toggleVisibility(sortContent, isSort);
                            toggleVisibility(filterContent, isFilter);
                            toggleVisibility(groupContent, isGroup);
                            toggleActive(sortDropdown, isSort);
                            toggleActive(filterDropdown, isFilter);
                            toggleActive(groupDropdown, isGroup);
                        });

                        sortContainer.appendChild(sortDropdown);
                        // sortContainer.appendChild(filterDropdown);
                        sortContainer.appendChild(groupDropdown);
                        sortContainer.appendChild(sortContent);
                        // sortContainer.appendChild(filterContent);
                        sortContainer.appendChild(groupContent);
                        dropdown.insertBefore(sortContainer, dropdown.firstChild);
                    }

                    resultsContainer.appendChild(dropdown);

                    return outputValue;
                }


                function openCard(command) {
                    var i;
                    var overlay = document.createElement("div");
                    var overlayInfo = document.createElement("div");
                    var overlayHeader = document.createElement("div");
                    var commandTitle = document.createElement("p");
                    var commandTags = document.createElement("div");
                    var categoryTag = document.createElement("div");
                    var infoTable = document.createElement("table");
                    var closeButton = document.createElement("button");
                    var closeIcon = document.createElement("img");

                    overlay.setAttribute("id", "commands-search-results-overlay");
                    overlayInfo.setAttribute("id", "commands-search-results-overlay-info");

                    overlayHeader.setAttribute("id", "commands-search-results-overlay-header");

                    commandTitle.setAttribute("id", "commands-search-results-overlay-title");
                    commandTitle.innerHTML = `<b>${command.name}</b>`;

                    if (command.aliases.length > 0) {
                        var commandAliases = document.createElement("div");
                        var aliasTag = document.createElement("div");
                        var aliasList = document.createElement("div");

                        commandAliases.setAttribute("id", "commands-search-results-overlay-aliases-container");

                        aliasTag.classList.add("commands-search-results-overlay-tag");
                        aliasTag.style.backgroundColor = "#d1d1d1";
                        aliasTag.style.color = "#4e4e4e";
                        aliasTag.textContent = "üí° A.K.A.";

                        aliasList.setAttribute("id", "commands-search-results-overlay-aliases");
                        aliasList.textContent = command.aliases.join(", ");

                        commandAliases.appendChild(aliasTag);
                        commandAliases.appendChild(aliasList);
                    }

                    commandTags.setAttribute("id", "commands-search-results-overlay-tags-container");

                    categoryTag.classList.add("commands-search-results-overlay-tag");
                    categoryTag.style.backgroundColor = categoryConstants.find(x => x.category == command.category).color;
                    categoryTag.style.color = categoryConstants.find(x => x.category == command.category).textColor;
                    categoryTag.textContent = `${categoryConstants.find(x => x.category == command.category).emoji} ${command.category.charAt(0).toUpperCase()}${command.category.slice(1)}`;

                    commandTags.appendChild(categoryTag);

                    if (command.premium) {
                        var premiumTag = document.createElement("div");
                        premiumTag.classList.add("commands-search-results-overlay-tag");
                        premiumTag.style.backgroundColor = "#ffb700";
                        premiumTag.style.color = "#4e4e4e";
                        premiumTag.textContent = "‚≠ê Premium";

                        commandTags.appendChild(premiumTag);
                    }

                    infoTable.setAttribute("id", "commands-search-results-overlay-table");
                    infoTable.style.borderCollapse = "collapse";
                    infoTable.style.border = "1px solid #cacaca";
                    var tableData = [
                        { title: "Description", content: command.description.replace(/\n/g, "<br>") },
                        { title: "Usage", content: `.${command.usage.split("\n").join("<br>.")}` },
                        { title: "Examples", content: `.${command.example.split("\n").join("<br>.")}` },
                        { title: "Cooldown", content: command.cooldown },
                    ];
                    for (i = 0; i < tableData.length; i++) {
                        var row = document.createElement("tr");

                        var title = document.createElement("td");
                        title.classList.add("commands-search-results-overlay-table-title");
                        title.textContent = tableData[i].title;

                        var content = document.createElement("td");
                        content.classList.add("commands-search-results-overlay-table-content");
                        content.innerHTML = tableData[i].content;

                        row.appendChild(title);
                        row.appendChild(content);
                        infoTable.appendChild(row);
                    }
                    var cells = infoTable.getElementsByTagName("td");
                    for (i = 0; i < cells.length; i++) {
                        cells[i].style.border = "1px solid #cacaca";
                        cells[i].style.paddingLeft = "20px";
                        cells[i].style.paddingRight = "20px";
                        cells[i].style.paddingTop = "10px";
                        cells[i].style.paddingBottom = "10px";
                    }

                    closeButton.setAttribute("id", "commands-search-results-overlay-close");
                    closeIcon.alt = "Close";
                    closeIcon.src = "static/material-icons/close.svg";
                    closeButton.appendChild(closeIcon);

                    overlayHeader.appendChild(commandTitle);
                    if (command.aliases.length > 0) overlayHeader.appendChild(commandAliases);
                    overlayHeader.appendChild(commandTags);
                    overlayInfo.appendChild(closeButton);
                    overlayInfo.appendChild(overlayHeader);
                    overlayInfo.appendChild(infoTable);
                    overlay.appendChild(overlayInfo);
                    document.body.appendChild(overlay);

                    overlay.addEventListener("click", () => {
                        overlay.remove();
                    });
                    closeButton.onclick = () => {
                        overlay.remove();
                    }
                    overlayInfo.addEventListener("click", event => {
                        event.stopPropagation();
                    });
                }


                var timeout, searchStatus;

                function onInput() {
                    clearTimeout(timeout);

                    const searchButton = document.getElementById("commands-search-button");

                    var searchIcon = searchButton.querySelector("img");
                    if (searchIcon) {
                        searchButton.removeChild(searchIcon);
                    }

                    var searchSpinner = document.getElementById("commands-search-loading");
                    if (!searchSpinner) {
                        searchSpinner = document.createElement("div");
                        searchSpinner.setAttribute("id", "commands-search-loading");

                        searchButton.appendChild(searchSpinner);

                        searchButton.style.backgroundColor = "#4e4e4e";
                    }

                    var previousResult = document.getElementById("commands-search-results-dropdown");
                    if (previousResult) previousResult.remove();

                    var searchInput = document.getElementById("commands-search-input");
                    if (searchInput.value.length > 0) {
                        searchStatus = searchCommands(searchInput.value, searchButton);
                    }

                    timeout = setTimeout(() => {
                        searchSpinner.remove();

                        searchInput = document.getElementById("commands-search-input");

                        searchIcon = document.createElement("img");
                        searchIcon.alt = "Search";
                        searchIcon.draggable = false;

                        if (searchInput.value.length > 0) {
                            switch (searchStatus) {
                                case "exact":
                                    searchIcon.src = "static/material-icons/exact.svg";
                                    searchButton.style.backgroundColor = "#21851d";
                                    break;

                                case "starts":
                                    searchIcon.src = "static/material-icons/start.svg";
                                    searchButton.style.backgroundColor = "#21851d";
                                    break;

                                case "contains":
                                    searchIcon.src = "static/material-icons/contains.svg";
                                    searchButton.style.backgroundColor = "#ebb52f";
                                    break;

                                case "description":
                                    searchIcon.src = "static/material-icons/description.svg";
                                    searchButton.style.backgroundColor = "#8bb548";
                                    break;

                                case "category":
                                    searchIcon.src = "static/material-icons/category.svg";
                                    searchButton.style.backgroundColor = "#3756c4";
                                    break;

                                case "letters":
                                    searchIcon.src = "static/material-icons/letters.svg";
                                    searchButton.style.backgroundColor = "#c77834";
                                    break;

                                case "none":
                                    searchIcon.src = "static/material-icons/unknown.svg";
                                    searchButton.style.backgroundColor = "#4e4e4e";
                                    break;
                            }
                        } else {
                            searchIcon.src = "static/material-icons/search.svg";
                            searchButton.style.backgroundColor = "#4e4e4e";
                        }

                        searchButton.appendChild(searchIcon);
                    }, 800);
                }

                document.getElementById("commands-search-bar").addEventListener("input", onInput);

                if (fill) {
                    document.getElementById("about-switch-input").click();
                    document.getElementById("commands-search-input").value = fill;
                    history.replaceState(null, null, window.location.pathname);
                    onInput();
                } else {
                    document.getElementById("about-wrapper").style.display = "flex";
                    document.getElementById("commands-wrapper").style.display = "none";
                }
            }
        </script>
    </body>
</html>